<!--jhMask.html start-->
<script type="text/x-template" id="jhMask">
  <div v-if="showMask" class="jh-mask"></div>
</script>

<script>
  Vue.component('jhMask', {
    template: "#jhMask",
    vueComponent: 'jhMask',
    vuetify: new Vuetify(),
    data() {
      return {
        showMask: false,
        timer: null,
        timerRemind: 0,
        timeout: 0 
      };
    },
    created() {
      window.jhMask = {
        show: this.show,
        hide: this.hide
      };
      this.hideTimer()
    },
    methods: {
      hideTimer() {
        this.timer = setInterval(() => {
          if(this.timeout == 0) {
            return
          }
          this.timerRemind -= 1000;
          if (this.timerRemind < 1000) {
            this.hide()
          }
        }, 1000);
      },
      show(paramObj) {
        if (typeof(paramObj)=='number') {
          this.timeout = paramObj;
        }
        if (typeof(paramObj)=='object') {
          const { timeout } = paramObj
          this.timeout = timeout;
          this.timerRemind = timeout;
        }
        this.showMask = true;
      },
      hide() {
        this.showMask = false;
      }
    },
  });

</script>
<style>
 
.jh-mask {
  background-color:#e3e3e3; 
  animation: all .3s ease;
  position:fixed; 
  z-index:99; 
  left:0; 
  top:0; 
  display:block; 
  width:100%; 
  height:100%;
  opacity:0;
  filter: alpha(opacity=0);-
  moz-opacity: 0;
} 
</style>
<!--jhMask.html end-->
